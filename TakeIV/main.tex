\documentclass[letterpaper,twocolumn,10pt]{article}
%\usepackage{times}
\usepackage{epsfig,endnotes}

%========================
%  Packages
%========================

\usepackage{graphicx,url,color}
\usepackage{amsmath}
\usepackage{amssymb}
%\usepackage{amsthm}  %<---- for a different "look" in theorems (theorem word in bold, etc.) %ACM conflict with proof definition?
%\usepackage{subfigure}
%\usepackage[tight,footnotesize]{subfigure}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\usepackage{times}
\usepackage[outercaption]{sidecap}    


%\usepackage{todonotes}
%\usepackage[normalem]{ulem} %strikethrough: \sout{Hello World}
%\usepackage{lastpage} %for number of pages
%\usepackage{xspace}
%\usepackage{multirow}
%\usepackage{balance}

\usepackage[colorlinks=true,allcolors=blue,breaklinks]{hyperref}   % hyperlinks, including DOIs and URLs in bibliography
\usepackage{subcaption}
\usepackage{graphicx}
%\usepackage{caption}
\usepackage{float}
%\usepackage{floatrow}


%========================
%  Macros
%========================

\newcommand{\code}[1]{\textsf{\fontsize{9}{11}\selectfont #1}}

\newcommand{\inred}[1]{{\color{red}{#1}}}
\newcommand{\remove}[1]{}
\newcommand{\Idit}[1]{[[\inred{Idit: #1}]]}
\newcommand{\Yoni}[1]{[\inred{Yoni: #1}]}
\newcommand{\tb}{\hspace{10mm}}

\newcommand{\sys}{Omid~FP}
\newcommand{\sysll}{Omid~LL}
\newcommand{\syspc}{Omid~2PC}

\newcommand{\speedup}[1]{#1$\times$}
\newcommand{\tuple}[1]{\ensuremath{\langle \mbox{#1} \rangle}}

\newcommand{\mypara}[1]{ \vspace{8pt} \noindent{\bf #1}\hspace{6pt}}

%========================
\begin{document}

\date{}

\title{Omid-Evolution: \\ Fast and Scalable Transactions for Real-Time Cloud Analytics }


\author{
{\rm Yonatan Gottesman\footnotemark[1]\tb Aran Bergman\footnotemark[2]\tb   Edward Bortnikov\footnotemark[1] }\\ 
{\rm Eshcar Hillel\footnotemark[1]\tb Idit Keidar\footnotemark[1] \footnotemark[2]\tb Ohad Shacham\footnotemark[1]}\\
	\footnotemark[1] Yahoo Research\ \ \footnotemark[2] Technion  \\ [2mm]
} % end author


\maketitle

%=========================================================================
%  Abstract
%=========================================================================

\subsection*{Abstract}

We describe the evolution of Omid, a transaction processing system for Apache HBase, 
to power Apache Phoenix, a cloud-grade real-time SQL analytics engine.  

Omid was originally designed for data processing pipelines at Yahoo, which are, by and large, 
huge-scale throughput-oriented monolithic NoSQL applications. Evolving into a platform for 
a variety of converged real-time transaction processing and analytics ({\em translytics}) 
applications introduces new functional and performance requirements. For example, SQL 
support is key for developer productivity, multi-tenancy is paramount for cloud deployment, 
and latency is cardinal for just-in-time data ingestion and insights in a variety of applications. 

In this paper we discuss our efforts to adapt Omid to these new domains, which emerged 
in the process of integrating it into Phoenix as transaction processing backend. The centerpiece
of our work is latency reduction in Omid's protocol, which also improves the overall scalability.  
Under light load, the new protocol's latency is 4x to 5x smaller than the legacy Omid's, whereas 
under increased loads it is an order of magnitude faster. We further describe an experimental 
\emph{fast path} for single-key transactions, which enables processing them almost as fast 
as native HBase operations.

%========================

\section{Introduction} \label{sec:intro}
\input{intro} 

\section{Service API and Semantics} \label{sec:api}
\input{api}

\section{Fast Transactions with \sysll} \label{sec:ll}
\input{lorra}
\input{implementation}

\section{\sys\ Fast Path Transactions}
\label{sec:alg}
\input{fast-path}

\section{Evaluation} \label{sec:eval}
\input{evaluation}

\section{Related Work} \label{sec:related}
\input{related}

\section{Conclusion} \label{sec:conclusions}

As transaction processing services begin to be used in new application domains, low 
transaction latency becomes an important consideration. 
Motivated by such use cases we developed \sys, a highly scalable 
low-latency transaction processing engine for Apache HBase. 
We implemented \sys\ based on Omid, and 
improved its protocol to reduce latency (by 4x to 5x under light load
and an order of magnitude under heavy load). In contrast with 
Omid, it scales almost perfectly on the throughput side. 

We further designed a generic \emph{fast path} for single-key transactions, 
which executes them  almost as fast as native HBase operations (in terms of 
both throughput and latency), while preserving
transactional semantics relative to longer transactions.
Our fast path algorithm is not \sys-specific, and can be similarly supported in 
other transaction management systems.
Our implementation of the fast path in \sys\ can process single-key
transactions  at a virtually unbounded rate (thanks to HBase's horizontal 
scalability), and improves the latency of short transactions
by another 3x--5x under high load.

The \sys\ code is publicly available\footnote{\small{Omitted for blind review.}}. 
%\footnote{\url{https://github.com/yonigottesman/incubator-omid/tree/localTransactions}}, and 
We are working on contributing \sysll\  to the Omid production code base. 
We believe our improvements will become instrumental for modern cloud-based, large-scale, 
latency-sensitive services, e.g., the Phoenix OLTP engine, which are designed 
to harness up to ten thousand nodes.

%\subsection*{Acknowledgments}

\newpage

{\footnotesize \bibliographystyle{acm}

\bibliography{refs}

\end{document}
